# æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

## 1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—** | HTML5 | - | åŸºæœ¬æ§‹é€  |
| **ã‚¹ã‚¿ã‚¤ãƒ«** | CSS3 | - | åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« |
| | Tailwind CSS | 3.x | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS |
| **ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** | JavaScript | ES6+ | æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆç­‰ |
| | Alpine.js | 3.x | è»½é‡JSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆBreezeæ¨™æº–ï¼‰ |
| **ã‚°ãƒ©ãƒ•æç”»** | Chart.js | 4.x | æ¨ç§»ã‚°ãƒ©ãƒ•è¡¨ç¤º â˜…èª²é¡Œ2è¿½åŠ  |

### 1.1 Tailwind CSSã®åˆ©ç”¨
- Laravel Breezeæ¨™æº–ã§å«ã¾ã‚Œã‚‹
- ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ã¯ä½œæˆã›ãšã€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ã®ã¿ä½¿ç”¨
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆãŸã ã—PoCã§ã¯PCç”»é¢ã®ã¿ï¼‰
- **ã€èª²é¡Œ2ææ¡ˆã€‘ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œæ™‚ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¯ãƒ©ã‚¹ã‚’æ´»ç”¨**

### 1.2 JavaScriptã®åˆ©ç”¨ã‚·ãƒ¼ãƒ³

#### èª²é¡Œ1ï¼ˆåŸºæœ¬æ©Ÿèƒ½ï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è‡ªå‹•ç”Ÿæˆ
- ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼
- ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º/éè¡¨ç¤º

#### èª²é¡Œ2è¿½åŠ ï¼ˆå®Ÿè£…ï¼‰
- **Chart.js ã«ã‚ˆã‚‹æ¨ç§»ã‚°ãƒ©ãƒ•æç”»**
  - æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼ˆä½“èª¿ãƒ»ãƒ¡ãƒ³ã‚¿ãƒ«ã®æ™‚ç³»åˆ—æ¨ç§»ï¼‰
  - æœŸé–“é¸æŠæ©Ÿèƒ½ï¼ˆ1é€±é–“/1ãƒ¶æœˆ/3ãƒ¶æœˆï¼‰
  - ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆFetch APIï¼‰
- **ãƒ•ãƒ©ã‚°UI ã®å‹•çš„æ›´æ–°**
  - ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³é¸æŠæ™‚ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
  - ãƒ¡ãƒ¢æ¬„ã®è¡¨ç¤º/éè¡¨ç¤ºåˆ¶å¾¡

#### èª²é¡Œ2ææ¡ˆï¼ˆææ¡ˆã®ã¿ï¼‰
- **ã‚¯ãƒ©ã‚¹å…¨ä½“çµ±è¨ˆã‚°ãƒ©ãƒ•**ï¼ˆChart.jsï¼‰
  - è¤‡æ•°ã®ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ï¼ˆæŠ˜ã‚Œç·šã€æ£’ã€ç©ã¿ä¸Šã’æ£’ï¼‰
  - ã‚°ãƒ©ãƒ•é–“ã®é€£å‹•
- **é€šçŸ¥æ©Ÿèƒ½ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**
  - æ—¢èª­å‡¦ç†ã®éåŒæœŸé€šä¿¡
  - æœªèª­ã‚«ã‚¦ãƒ³ãƒˆã®å‹•çš„æ›´æ–°

### 1.3 Chart.js è¨­å®šä¾‹ï¼ˆèª²é¡Œ2 - å®Ÿè£…ï¼‰
```javascript
// å€‹åˆ¥ç”Ÿå¾’æ¨ç§»ã‚°ãƒ©ãƒ•
const ctx = document.getElementById('progressChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: dates,  // ['10/20', '10/21', ...]
        datasets: [
            {
                label: 'ä½“èª¿',
                data: healthData,  // [3, 4, 3, ...]
                borderColor: 'rgb(59, 130, 246)',
                tension: 0.1
            },
            {
                label: 'ãƒ¡ãƒ³ã‚¿ãƒ«',
                data: mentalData,  // [4, 3, 4, ...]
                borderColor: 'rgb(168, 85, 247)',
                tension: 0.1
            }
        ]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                min: 1,
                max: 5,
                ticks: {
                    stepSize: 1
                }
            }
        }
    }
});
```

---

## 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å‚™è€ƒ |
|---------|------|-----------|------|
| **è¨€èª** | PHP | 8.3 | |
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Laravel | 10.x | LTSç‰ˆ |
| **èªè¨¼** | Laravel Breeze | 1.x | ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼ |

### 2.1 Laravelã®ä¸»è¦æ©Ÿèƒ½

#### èª²é¡Œ1ï¼ˆåŸºæœ¬æ©Ÿèƒ½ï¼‰
- Eloquent ORM
- Blade ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»Seeder
- Viteï¼ˆã‚¢ã‚»ãƒƒãƒˆãƒ“ãƒ«ãƒ‰ï¼‰

#### èª²é¡Œ2è¿½åŠ ï¼ˆå®Ÿè£…ï¼‰
- **Policyï¼ˆèªå¯ï¼‰**
  - NotebookPolicy: ãƒ•ãƒ©ã‚°è¨­å®šæ¨©é™ã®åˆ¶å¾¡
  - å­¦å¹´å†…ã®æ•™å¸«ã®ã¿ãƒ•ãƒ©ã‚°è¨­å®šå¯èƒ½
- **JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  - ã‚°ãƒ©ãƒ•ç”¨ãƒ‡ãƒ¼ã‚¿API
  - éåŒæœŸå‡¦ç†ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### èª²é¡Œ2ææ¡ˆï¼ˆææ¡ˆã®ã¿ï¼‰
- **Laravel Commandï¼ˆãƒãƒƒãƒå‡¦ç†ï¼‰**
  - ä½“èª¿ç•°å¸¸ã®è‡ªå‹•æ¤œçŸ¥
  - ãƒ¡ãƒ³ã‚¿ãƒ«ç•°å¸¸ã®è‡ªå‹•æ¤œçŸ¥
  - æå‡ºç‡ä½ä¸‹ã®æ¤œçŸ¥
- **Laravel Scheduleï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ï¼‰**
  - æ¯æ—¥æœ8æ™‚ã«ç•°å¸¸æ¤œçŸ¥å®Ÿè¡Œ
  - æ¯æ—¥å¤•æ–¹17æ™‚ã«æå‡ºç‡ãƒã‚§ãƒƒã‚¯
- **Queueï¼ˆã‚­ãƒ¥ãƒ¼ï¼‰**
  - é‡ã„å‡¦ç†ã®éåŒæœŸå®Ÿè¡Œï¼ˆå°†æ¥æ‹¡å¼µï¼‰

### 2.2 Breezeã§æä¾›ã•ã‚Œã‚‹æ©Ÿèƒ½
- ãƒ­ã‚°ã‚¤ãƒ³ / ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- CSRFä¿è­·
- Tailwind CSSçµ±åˆ
- Alpine.jsçµ±åˆ

### 2.3 Policy ä¾‹ï¼ˆèª²é¡Œ2 - å®Ÿè£…ï¼‰
```php
// app/Policies/NotebookPolicy.php

class NotebookPolicy
{
    /**
     * ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã§ãã‚‹ã‹
     */
    public function updateFlag(User $user, Notebook $notebook)
    {
        // æ‹…ä»»ã¾ãŸã¯å­¦å¹´ä¸»ä»»ã®ã¿
        if (!in_array($user->role, ['teacher', 'grade_leader'])) {
            return false;
        }
        
        // åŒå­¦å¹´ã®ã¿
        return $user->grade_id === $notebook->user->grade_id;
    }
}
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å‚™è€ƒ |
|---------|------|-----------|------|
| **RDBMS** | MySQL | 8.0 | |
| **æ–‡å­—ã‚»ãƒƒãƒˆ** | utf8mb4 | - | çµµæ–‡å­—å¯¾å¿œ |
| **ç…§åˆé †åº** | utf8mb4_unicode_ci | - | |

### 3.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel_notebook
DB_USERNAME=root
DB_PASSWORD=
```

### 3.2 ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

#### èª²é¡Œ1ï¼ˆåŸºæœ¬ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- `users`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `classes`: ã‚¯ãƒ©ã‚¹æƒ…å ±
- `notebooks`: é€£çµ¡å¸³è¨˜éŒ²

#### èª²é¡Œ2è¿½åŠ ï¼ˆã‚«ãƒ©ãƒ æ‹¡å¼µ - å®Ÿè£…ï¼‰
- `notebooks` ãƒ†ãƒ¼ãƒ–ãƒ«ã«8ã‚«ãƒ©ãƒ è¿½åŠ 
  - ã‚¹ã‚¿ãƒ³ãƒ—é–¢é€£ï¼ˆstamp_type, stamped_atï¼‰
  - ã‚³ãƒ¡ãƒ³ãƒˆé–¢é€£ï¼ˆteacher_feedback, commented_atï¼‰
  - ãƒ•ãƒ©ã‚°é–¢é€£ï¼ˆflag, flagged_at, flagged_by, flag_memoï¼‰

#### èª²é¡Œ2ææ¡ˆï¼ˆæ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« - ææ¡ˆã®ã¿ï¼‰
- `teacher_comments`: æ‹…ä»»é–“å…±æœ‰ãƒ¡ãƒ¢
- `notifications`: ã‚·ã‚¹ãƒ†ãƒ å†…é€šçŸ¥

---

## 4. é–‹ç™ºç’°å¢ƒ

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å‚™è€ƒ |
|---------|------|-----------|------|
| **ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼** | MAMP | 5.0.6 | PHP 8.3å«ã‚€ |
| **Webã‚µãƒ¼ãƒãƒ¼** | Apache | 2.4 | |
| **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†** | Composer | 2.x | PHPä¾å­˜é–¢ä¿‚ |
| | npm | 9.x+ | JSä¾å­˜é–¢ä¿‚ |
| **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«** | Vite | 4.x | Laravel 10æ¨™æº– |
| **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†** | Git | 2.x | |
| **ãƒªãƒã‚¸ãƒˆãƒª** | GitLab | - | quest_1ãƒªãƒã‚¸ãƒˆãƒª |

### 4.1 é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
# Laravelé–‹ç™ºã‚µãƒ¼ãƒãƒ¼
php artisan serve

# Viteé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
npm run dev
```

### 4.2 èª²é¡Œ2ç”¨ã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆææ¡ˆã®ã¿ï¼‰
```bash
# ä½“èª¿ç•°å¸¸ãƒã‚§ãƒƒã‚¯ï¼ˆæ‰‹å‹•å®Ÿè¡Œï¼‰
php artisan notebooks:check-health

# ãƒ¡ãƒ³ã‚¿ãƒ«ç•°å¸¸ãƒã‚§ãƒƒã‚¯
php artisan notebooks:check-mental

# æå‡ºç‡ãƒã‚§ãƒƒã‚¯
php artisan notebooks:check-submission

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©èµ·å‹•ï¼ˆcronï¼‰
* * * * * cd /path/to/project && php artisan schedule:run >> /dev/null 2>&1
```

---

## 5. æœ¬ç•ªç’°å¢ƒï¼ˆAWSï¼‰

### 5.1 PoCç”¨ï¼ˆæœ€å°æ§‹æˆï¼‰
```
EC2 (Laravel) â† HTTPç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹
  â†“
RDS (MySQL 8.0)
```

| ã‚µãƒ¼ãƒ“ã‚¹ | ã‚¹ãƒšãƒƒã‚¯ | ç”¨é€” |
|---------|---------|------|
| **EC2** | t2.micro | Webã‚µãƒ¼ãƒãƒ¼ï¼ˆLaravelï¼‰ |
| **RDS** | db.t3.micro (MySQL 8.0) | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |

### 5.2 æœ¬ç•ªæƒ³å®šï¼ˆèª²é¡Œ2ææ¡ˆï¼‰
```
Route53 (DNS)
  â†“
ELB (SSLçµ‚ç«¯ ACM)
  â†“
EC2 (Laravel)
  â†“
RDS (MySQL 8.0)

S3 (ãƒ­ã‚°ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—)
CloudWatch (ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°)
```

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” |
|---------|------|
| **VPC** | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é›¢ |
| **Route53** | DNSç®¡ç† |
| **ELB** | ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ |
| **ACM** | SSLè¨¼æ˜æ›¸ |
| **EC2** | Webã‚µãƒ¼ãƒãƒ¼ |
| **RDS** | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| **S3** | é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— |
| **CloudWatch** | ãƒ­ã‚°ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›£è¦– |

### 5.3 EC2ç’°å¢ƒæ§‹ç¯‰
```bash
# Ubuntu 24.04 LTS

# PHP 8.3ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install -y php8.3 php8.3-fpm php8.3-mysql php8.3-xml php8.3-mbstring php8.3-curl

# Composerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -sS https://getcomposer.org/installer | php
sudo mv composer.phar /usr/local/bin/composer

# Apacheã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»è¨­å®š
sudo apt install -y apache2
sudo a2enmod rewrite
sudo systemctl restart apache2

# Laravelãƒ‡ãƒ—ãƒ­ã‚¤
cd /var/www
git clone [ãƒªãƒã‚¸ãƒˆãƒªURL] laravel_notebook
cd laravel_notebook
composer install --no-dev --optimize-autoloader
php artisan key:generate
php artisan migrate --force
php artisan db:seed
```

### 5.4 èª²é¡Œ2ç”¨ã®è¿½åŠ è¨­å®šï¼ˆææ¡ˆã®ã¿ï¼‰
```bash
# Cronã‚¸ãƒ§ãƒ–è¨­å®šï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ï¼‰
crontab -e

# ä»¥ä¸‹ã‚’è¿½åŠ 
* * * * * cd /var/www/laravel_notebook && php artisan schedule:run >> /dev/null 2>&1

# ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
sudo nano /etc/logrotate.d/laravel

# ä»¥ä¸‹ã‚’è¿½åŠ 
/var/www/laravel_notebook/storage/logs/*.log {
    daily
    rotate 14
    compress
    missingok
    notifempty
}
```

---

## 6. é–‹ç™ºãƒ„ãƒ¼ãƒ«

| ã‚«ãƒ†ã‚´ãƒª | ãƒ„ãƒ¼ãƒ« | ç”¨é€” |
|---------|-------|------|
| **ã‚¨ãƒ‡ã‚£ã‚¿** | VS Code | ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° |
| | Claude Code | AIæ”¯æ´ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° |
| **ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«** | Figma | ç”»é¢é·ç§»å›³ä½œæˆ |
| **ã‚¿ãƒ¼ãƒŸãƒŠãƒ«** | - | ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ |
| **ãƒ–ãƒ©ã‚¦ã‚¶** | Microsoft Edge | å‹•ä½œç¢ºèªï¼ˆå¿…é ˆï¼‰ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†** | phpMyAdmin | MAMPæ¨™æº– |

---

## 7. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

### 7.1 Composerï¼ˆPHPï¼‰

#### èª²é¡Œ1
```json
{
    "require": {
        "php": "^8.3",
        "laravel/framework": "^10.0",
        "laravel/breeze": "^1.0"
    }
}
```

#### èª²é¡Œ2è¿½åŠ ï¼ˆææ¡ˆã®ã¿ï¼‰
```json
{
    "require": {
        "php": "^8.3",
        "laravel/framework": "^10.0",
        "laravel/breeze": "^1.0"
    },
    "require-dev": {
        "phpunit/phpunit": "^10.0"
    }
}
```

### 7.2 npmï¼ˆJavaScriptï¼‰

#### èª²é¡Œ1
```json
{
    "devDependencies": {
        "alpinejs": "^3.0",
        "tailwindcss": "^3.0",
        "vite": "^4.0",
        "laravel-vite-plugin": "^0.8"
    }
}
```

#### èª²é¡Œ2è¿½åŠ ï¼ˆå®Ÿè£…ï¼‰
```json
{
    "dependencies": {
        "chart.js": "^4.4.0"
    },
    "devDependencies": {
        "alpinejs": "^3.0",
        "tailwindcss": "^3.0",
        "vite": "^4.0",
        "laravel-vite-plugin": "^0.8"
    }
}
```

### 7.3 Chart.js ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆèª²é¡Œ2 - å®Ÿè£…ï¼‰
```bash
# Chart.js ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install chart.js

# Viteè¨­å®šã«è¿½åŠ 
# vite.config.js ã¯è‡ªå‹•ã§èªè­˜
```

---

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| é …ç›® | å¯¾ç­– | å®Ÿè£… |
|------|------|------|
| **èªè¨¼** | ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼ | Laravel Breeze |
| **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰** | bcryptãƒãƒƒã‚·ãƒ¥åŒ– | Laravelæ¨™æº– |
| **CSRFä¿è­·** | ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ | Laravelæ¨™æº– |
| **XSSå¯¾ç­–** | ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç† | Blade `{{ }}` |
| **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³** | ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ | Eloquent ORM |
| **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†** | ã‚»ã‚­ãƒ¥ã‚¢ã‚¯ãƒƒã‚­ãƒ¼ | Laravelæ¨™æº– |
| **èªå¯** | Policy | Laravelæ¨™æº– â˜…èª²é¡Œ2è¿½åŠ  |

### 8.1 èª²é¡Œ2è¿½åŠ ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

#### èªå¯ï¼ˆPolicyï¼‰
```php
// ãƒ•ãƒ©ã‚°è¨­å®šæ¨©é™ãƒã‚§ãƒƒã‚¯
$this->authorize('updateFlag', $notebook);

// é€šçŸ¥é–²è¦§æ¨©é™ãƒã‚§ãƒƒã‚¯
if ($notification->user_id !== auth()->id()) {
    abort(403);
}
```

#### JSON API ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```php
// CSRF ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ï¼ˆPOST/PATCH/DELETEï¼‰
@csrf

// JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
return response()->json([
    'data' => e($data)  // XSSå¯¾ç­–
]);
```

---

## 9. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### 9.1 æœ€é©åŒ–æ–½ç­–

#### èª²é¡Œ1ï¼ˆåŸºæœ¬ï¼‰
- Eloquentã®é…å»¶ãƒ­ãƒ¼ãƒ‰å›é¿ï¼ˆ`with()`ï¼‰
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ10ä»¶/ãƒšãƒ¼ã‚¸ï¼‰
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®šï¼ˆ`record_date`, `is_read` ç­‰ï¼‰

#### èª²é¡Œ2è¿½åŠ ï¼ˆå®Ÿè£…ï¼‰
- **ãƒ•ãƒ©ã‚°æ¤œç´¢ã®æœ€é©åŒ–**
  - `flag` ã‚«ãƒ©ãƒ ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  - `flagged_at` ã‚«ãƒ©ãƒ ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- **ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿å–å¾—ã®æœ€é©åŒ–**
  - å¿…è¦ãªã‚«ãƒ©ãƒ ã®ã¿ SELECT
  - æ—¥ä»˜ç¯„å›²ã®çµã‚Šè¾¼ã¿
```php
// æœ€é©åŒ–ä¾‹
Notebook::select('record_date', 'health_status', 'mental_status')
    ->where('user_id', $studentId)
    ->whereBetween('record_date', [$startDate, $endDate])
    ->orderBy('record_date')
    ->get();
```

#### èª²é¡Œ2ææ¡ˆï¼ˆææ¡ˆã®ã¿ï¼‰
- **é€šçŸ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‘ãƒ¼ã‚¸å‡¦ç†**
  - 3ãƒ¶æœˆä»¥ä¸Šå‰ã®æ—¢èª­é€šçŸ¥ã‚’è‡ªå‹•å‰Šé™¤
- **çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥**
  - ã‚¯ãƒ©ã‚¹çµ±è¨ˆã‚°ãƒ©ãƒ•ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ1æ™‚é–“ï¼‰

### 9.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆæœ¬ç•ªã®ã¿ï¼‰
```bash
# è¨­å®šã‚­ãƒ£ãƒƒã‚·ãƒ¥
php artisan config:cache

# ãƒ«ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥
php artisan route:cache

# ãƒ“ãƒ¥ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥
php artisan view:cache

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear
```

---

## 10. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚°

### 10.1 ãƒ­ã‚°

#### èª²é¡Œ1
- **å ´æ‰€**: `storage/logs/laravel.log`
- **ãƒ¬ãƒ™ãƒ«**: debug, info, warning, error

#### èª²é¡Œ2è¿½åŠ ï¼ˆææ¡ˆã®ã¿ï¼‰
- **ãƒãƒƒãƒå‡¦ç†ãƒ­ã‚°**
  - ä½“èª¿ç•°å¸¸æ¤œçŸ¥ã®å®Ÿè¡Œãƒ­ã‚°
  - é€šçŸ¥ä½œæˆã®ãƒ­ã‚°
```php
// app/Console/Commands/CheckHealthAnomalies.php
Log::info('ä½“èª¿ç•°å¸¸ãƒã‚§ãƒƒã‚¯é–‹å§‹');
Log::info("ä½“èª¿ç•°å¸¸æ¤œå‡º: {$student->name}");
Log::info("ä½“èª¿ç•°å¸¸ãƒã‚§ãƒƒã‚¯å®Œäº†: {$count}ä»¶");
```

### 10.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```php
// app/Exceptions/Handler.php

public function register()
{
    $this->reportable(function (Throwable $e) {
        \Log::error($e->getMessage(), [
            'exception' => get_class($e),
            'file' => $e->getFile(),
            'line' => $e->getLine(),
            'user_id' => auth()->id(),
        ]);
    });
}
```

### 10.3 èª²é¡Œ2ç”¨ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ï¼ˆææ¡ˆã®ã¿ï¼‰
```php
// CloudWatch Logs ã¸ã®ãƒ­ã‚°é€ä¿¡ï¼ˆå°†æ¥æ‹¡å¼µï¼‰
// AWS SDK for PHP ã‚’ä½¿ç”¨

use Aws\CloudWatchLogs\CloudWatchLogsClient;

$client = new CloudWatchLogsClient([
    'region' => 'ap-northeast-1',
    'version' => 'latest'
]);

$client->putLogEvents([
    'logGroupName' => '/aws/laravel/notebook',
    'logStreamName' => 'application',
    'logEvents' => [
        [
            'message' => 'ä½“èª¿ç•°å¸¸æ¤œçŸ¥å®Ÿè¡Œ',
            'timestamp' => time() * 1000
        ]
    ]
]);
```

---

## 11. ãƒ†ã‚¹ãƒˆ

### 11.1 ãƒ†ã‚¹ãƒˆç’°å¢ƒ

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | å‚™è€ƒ |
|---------|------|------|
| **ãƒ„ãƒ¼ãƒ«** | PHPUnit | Laravelæ¨™æº– |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | SQLite | in-memory |

### 11.2 ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
php artisan test

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆ
php artisan test --filter NotebookTest

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
php artisan test --coverage
```

### 11.3 ãƒ†ã‚¹ãƒˆä¾‹ï¼ˆèª²é¡Œ2 - å®Ÿè£…ï¼‰
```php
// tests/Feature/FlagTest.php

class FlagTest extends TestCase
{
    public function test_teacher_can_set_flag()
    {
        $teacher = User::factory()->create(['role' => 'teacher']);
        $notebook = Notebook::factory()->create();
        
        $response = $this->actingAs($teacher)
            ->patch(route('teacher.notebooks.updateFlag', $notebook), [
                'flag' => 'watch',
                'flag_memo' => 'ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¢'
            ]);
        
        $response->assertRedirect();
        $this->assertEquals('watch', $notebook->fresh()->flag);
    }
}
```

---

## 12. èª²é¡Œ1â†’èª²é¡Œ2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯å¤‰æ›´ã‚µãƒãƒªãƒ¼

### 12.1 æ–°è¦è¿½åŠ ï¼ˆå®Ÿè£…ï¼‰
```
âœ… Chart.js 4.x
   - npm install chart.js
   - æ¨ç§»ã‚°ãƒ©ãƒ•æç”»ç”¨

âœ… Laravel Policy
   - ãƒ•ãƒ©ã‚°è¨­å®šæ¨©é™ã®åˆ¶å¾¡
   - NotebookPolicy ä½œæˆ

âœ… JSON API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
   - ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿å–å¾—ç”¨
   - éåŒæœŸå‡¦ç†ç”¨
```

### 12.2 æ–°è¦è¿½åŠ ï¼ˆææ¡ˆã®ã¿ï¼‰
```
ğŸ“„ Laravel Command
   - ä½“èª¿ç•°å¸¸æ¤œçŸ¥
   - ãƒ¡ãƒ³ã‚¿ãƒ«ç•°å¸¸æ¤œçŸ¥
   - æå‡ºç‡ãƒã‚§ãƒƒã‚¯

ğŸ“„ Laravel Schedule
   - Cronã‚¸ãƒ§ãƒ–è¨­å®š
   - æ¯æ—¥è‡ªå‹•å®Ÿè¡Œ

ğŸ“„ Laravel Queueï¼ˆå°†æ¥æ‹¡å¼µï¼‰
   - é‡ã„å‡¦ç†ã®éåŒæœŸå®Ÿè¡Œ
```

### 12.3 å¤‰æ›´ãªã—
```
- Laravel 10.x
- PHP 8.3
- MySQL 8.0
- Tailwind CSS
- Alpine.js
- Laravel Breeze
```

---

## 13. ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 13.1 é–‹ç™ºç’°å¢ƒ
```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone [ãƒªãƒã‚¸ãƒˆãƒªURL]
cd laravel_notebook

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
composer install
npm install

# 3. ç’°å¢ƒè¨­å®š
cp .env.example .env
php artisan key:generate

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
# MAMPã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å: laravel_notebook

# 5. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
php artisan migrate
php artisan db:seed

# 6. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
php artisan serve
npm run dev  # åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
```

### 13.2 æœ¬ç•ªç’°å¢ƒï¼ˆAWSï¼‰
```bash
# 1. EC2ã«SSHæ¥ç¶š
ssh -i key.pem ubuntu@[EC2_IP]

# 2. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
cd /var/www
sudo git clone [ãƒªãƒã‚¸ãƒˆãƒªURL] laravel_notebook
cd laravel_notebook

# 3. æœ¬ç•ªç”¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
composer install --no-dev --optimize-autoloader
npm install
npm run build

# 4. ç’°å¢ƒè¨­å®š
cp .env.production .env
php artisan key:generate

# 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šï¼ˆRDSï¼‰
# .env ãƒ•ã‚¡ã‚¤ãƒ«ã§RDSæ¥ç¶šæƒ…å ±ã‚’è¨­å®š

# 6. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
php artisan migrate --force
php artisan db:seed --force

# 7. ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³è¨­å®š
sudo chown -R www-data:www-data storage bootstrap/cache
sudo chmod -R 775 storage bootstrap/cache

# 8. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”Ÿæˆ
php artisan config:cache
php artisan route:cache
php artisan view:cache

# 9. Apacheè¨­å®š
sudo systemctl restart apache2
```

### 13.3 èª²é¡Œ2ç”¨ã®è¿½åŠ æ‰‹é †ï¼ˆææ¡ˆã®ã¿ï¼‰
```bash
# Cronã‚¸ãƒ§ãƒ–è¨­å®š
crontab -e

# ä»¥ä¸‹ã‚’è¿½åŠ 
* * * * * cd /var/www/laravel_notebook && php artisan schedule:run >> /dev/null 2>&1

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã®å‹•ä½œç¢ºèª
php artisan schedule:list

# ãƒãƒƒãƒå‡¦ç†ã®æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
php artisan notebooks:check-health
php artisan notebooks:check-mental
php artisan notebooks:check-submission
```

